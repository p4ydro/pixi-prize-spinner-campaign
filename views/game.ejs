<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Via Spinner</title>

    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.3/css/all.css" integrity="sha384-UHRtZLI+pbxtHCWp1t77Bi1L4ZtiqrqD80Kn4Z8NTSRyMA2Fd33n5dQ8lWUE00s/" crossorigin="anonymous">
    <link rel="stylesheet" href="stylesheets/fonts.css">
    <link rel="stylesheet" href="stylesheets/style.css">
    <link rel="stylesheet" href="stylesheets/game.css">
    <script src="code/tink.js"></script>
    <script src="code/pixi.js"></script>
    <script src="code/jquery-3.3.1.min.js"></script>
    <script src="code/Utils/DisableScroll.js"></script>

    <link rel="icon" href="images/favicon.ico">
</head>
<body>

    <noscript>
        <div class="noscript">You must enable JavaScript in your browser settings in order to participate in this game.</div>
    </noscript>

    <div class="background-holder">
        <img src="images/Game/Icons.png" alt="" class="background-icons">
        <img src="images/Game/Background-Overlay.png" alt="" class="background-top-overlay">
        <img src="images/Game/Background-Bottom.png" alt="" class="background-bottom-piece">
    </div>

    <div class="loading-overlay">
        <div class="text-section">
            <h1 class="loading-text">
                <i class="fas fa-spinner loading-icon fa-spin"></i>
                Loading...
            </h1>
        </div>
    </div>

    <div id="main">

        <div class="game-overlay">
            <div class="button-section">
                <button class="spin-button">Spin</button>
                <div class="spin-text">
                    <h2 class="seconds-text">Prizes are seconds away...</h2>
                    <h2 class="spinning-text">Spinning...</h2>
                </div>
            </div>
        </div>

        <div class="darkener"></div>
        
        <iframe src="" frameborder="0" class="prize-iframe" div="prize-iframe">
        </iframe>
        <!-- <div class="prompt-container"> -->
            <!-- <div class="prompt-transparency-wrapper"> -->
                <!-- <div class="prize-section">
                    <span class="prize-title-background"></span>
                    <h1>50% Off</h1>
                </div>
                <div class="description-section">

                    <div class="prize-text-content">
                        <h1 class="prize-text">You've won 50% off your first 5 rides!</h1>
                        <p class="secondary-prize-text">(max $10 off per ride)</p>
                    </div>
                    <h2>Use code:</h2>

                    <div class="code-container">
                        <h1 class="reward-code-text">XYZ123</h1>
                    </div>

                    <div class="links-container">
                        <div class="button-container">
                            <button class="download-button">Download and redeem</button>
                        </div>

                        <a class="text-code-link">
                            Text me the code
                            <span class="border-piece"></span>
                        </a>
                        <form class="text-phone-form" id="send-code-sms-form">
                            <input type="tel" id="phone-number-input" name="phone" class="phone-input" placeholder="(123)123-1234"
                            required>
                            <button type="button" class="submit-button">Send</button>
                        </form>
                    </div>

                </div> -->
            <!-- </div> -->
        <!-- </div> -->
    </div>

    <script>
        // var prizeFrameIsReady = false;

        // function setPrizeFrameReady() {
        //     prizeFrameIsReady = true;
        // }
        // $(document).on('prizeFrameReady', setPrizeFrameReady);

        $(document).ready(function() {
            var prizeFrame = $('iframe');

            // Position the prize iFrame on load to match size of inner elements
            prizeFrame.attr("src", "/prizeprompt");
            console.log(prizeFrame.attr("src"));
            
            // Resize frame on load
            prizeFrame.on('load', function() {
                resizePrizeFrameWithContent($(this));
                setTimeout(
                resizePrizeFrameWithContent($(this))
                , 3000);
            });

            // Resize prize frame on window resize
            $(window).on('resize', function() {
                resizePrizeFrameWithContent($('iframe'));
            });
        });

        function resizePrizeFrameWithContent(passedPrizeFrame) {
            let prizeFrameDocument = document.querySelector('iframe').contentWindow;
            
            passedPrizeFrame.css({
                height: prizeFrameDocument.$("body").outerHeight()
            });
        }
    </script>

    <script data-main="code/Main.js" src="requirejs/require.js"></script>

</body>
</html>